### ADR 001: Выбор архитектуры
**Дата:** 2024-09-30  
**Контекст:**  
Компания планирует развернуть централизованную платформу для управления пользователями, их активностями, сообществами и контентом, с интеграцией e-commerce-решения и дополнительными возможностями, такими как геймификация и спортивные соревнования. Учитывая существующие приложения компании для покупки товаров и специализированные спортивные приложения, новая платформа должна легко масштабироваться и поддерживать высокий уровень доступности. Также важно обеспечить удобную интеграцию новых функций и возможность тестировать эксперименты.

**Опция 1:** Микросервисная архитектура  
   - **Предположения:** Разделение функциональности на независимые сервисы. Каждый сервис может масштабироваться индивидуально и обслуживаться отдельно.
   - **Ограничения:** Увеличенная сложность интеграции и управления, особенно при межсервисной коммуникации.
   
**Опция 2:** Монолитная архитектура  
   - **Предположения:** Все компоненты приложения связаны и запускаются как единое целое. Проще в разработке, тестировании и развёртывании на начальном этапе.
   - **Ограничения:** Ограничения масштабируемости и сложности внесения изменений по мере увеличения функционала.

**Решение:** Микросервисная архитектура  
**Статус:** Принято  
**Последствия принятого решения:**  
   - **Позитивные:** Высокая гибкость и масштабируемость системы, возможность независимой разработки и тестирования сервисов.
   - **Негативные:** Увеличенная сложность DevOps-процессов, потребность в настройке оркестрации и межсервисной коммуникации.
   - **Риски:** Потребность в опытной команде DevOps для управления оркестрацией и мониторингом множества сервисов, возможность задержек в интеграции новых сервисов.

---

### ADR 002: Использование облачных решений
**Дата:** 2024-10-02 
**Контекст:**  
90% текущих систем компании уже работают в облаке, но компания использует разные облачные платформы, подбирая провайдеров под конкретные задачи. Для новой платформы необходимо обеспечить гибкость, масштабируемость и возможность тестирования новых технологий. Платформа должна быть доступной для клиентов в различных регионах и поддерживать высокий уровень отказоустойчивости.

**Опция 1:** Использование единого облачного провайдера  
   - **Предположения:** Выбор одного облачного провайдера, такого как AWS или GCP, для всех сервисов платформы.
   - **Ограничения:** Возможные ограничения при использовании отдельных сервисов, высокая зависимость от единственного поставщика.

**Опция 2:** Использование нескольких облачных провайдеров  
   - **Предположения:** Использование нескольких провайдеров для разных частей платформы в зависимости от задачи.
   - **Ограничения:** Требуется больше усилий для управления и интеграции между провайдерами.

**Решение:** Использование нескольких облачных провайдеров  
**Статус:** Принято  
**Последствия принятого решения:**  
   - **Позитивные:** Гибкость в выборе технологий под задачи, снижение зависимости от одного провайдера, повышение отказоустойчивости.
   - **Негативные:** Увеличение административной нагрузки и сложности интеграции между провайдерами.
   - **Риски:** Увеличение сложности управления, возможные дополнительные затраты на межпровайдерное взаимодействие.

---

### ADR 003: Логирование и мониторинг
**Дата:** 2024-10-05  
**Контекст:**  
Для новой платформы требуется централизованная система логирования и мониторинга, которая позволит отслеживать производительность, выявлять ошибки и предотвращать потенциальные сбои. Учитывая облачную инфраструктуру и распределенную природу микросервисов, необходимо обеспечить простое и масштабируемое решение для логирования и мониторинга.

**Опция 1:** Использование Fluentd + Elasticsearch + Kibana  
   - **Предположения:** Fluentd для агрегации логов, Elasticsearch для хранения, Kibana для визуализации.
   - **Ограничения:** Возможно высокое потребление ресурсов для Elasticsearch при увеличении объемов данных.

**Опция 2:** Использование встроенных облачных решений  
   - **Предположения:** Использование инструментов мониторинга, предлагаемых облачными провайдерами (например, CloudWatch на AWS).
   - **Ограничения:** Могут потребоваться дополнительные настройки для интеграции логов из нескольких облаков.

**Решение:** Fluentd + Elasticsearch + Kibana  
**Статус:** Принято  
**Последствия принятого решения:**  
   - **Позитивные:** Централизованное и настраиваемое решение, которое обеспечивает контроль над данными логов.
   - **Негативные:** Повышенные требования к ресурсам при росте данных, необходимость настройки системы.
   - **Риски:** Увеличение затрат на хранение и обработку логов при росте нагрузки.

---

### ADR 004: Хранение данных
**Дата:** 2024-10-10  
**Контекст:**  
Платформа включает различные типы данных: транзакции e-commerce, контент сообщества, спортивные активности и результаты пользователей. Это требует использования как реляционных, так и нереляционных баз данных. Реляционные базы данных предпочтительны для финансовых данных, а нереляционные — для работы с контентом и активностями пользователей.

**Опция 1:** Использование только реляционных баз данных  
   - **Предположения:** Хранение всех данных в реляционных БД для упрощения управления.
   - **Ограничения:** Трудности с хранением неструктурированных данных.

**Опция 2:** Использование реляционных и нереляционных баз данных  
   - **Предположения:** Разделение данных по типу и выбор подходящей БД для каждого типа.
   - **Ограничения:** Требуется координация между разными базами данных.

**Решение:** Использование реляционных (PostgreSQL) и нереляционных (MongoDB) баз данных  
**Статус:** Принято  
**Последствия принятого решения:**  
   - **Позитивные:** Гибкость и адаптируемость хранения данных, возможность эффективной работы с различными типами данных.
   - **Негативные:** Усложнение архитектуры и управление двумя типами БД.
   - **Риски:** Возможные сложности при масштабировании и интеграции данных между БД. 
